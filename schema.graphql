directive @oneOf on INPUT_OBJECT

type Activity implements Node {
  """The Globally Unique ID of this object"""
  id: ID!
  name: String!
  type: String!
  templateId: String!
  activityStart: String!
  activityFinish: String!
  timeslots: [TimeSlot!]!
  location: Location
  assignments: [StaffAssignment!]!
  tags: [ActivityTag!]!
}

"""A connection to a list of items."""
type ActivityConnection {
  """Pagination data for this connection"""
  pageInfo: PageInfo!

  """Contains the nodes in this connection"""
  edges: [ActivityEdge!]!
}

"""An edge in a connection."""
type ActivityEdge {
  """A cursor for use in pagination"""
  cursor: String!

  """The item at the end of the edge"""
  node: Activity!
}

input ActivityInput {
  id: ID
  templateId: ID
  activityStart: String
  activityDate: String
  name: String
  locationId: ID
  recurrenceRules: RecurrenceGroup
  requirements: [RequirementInput!]
  timeslots: [TimeSlotInput!]
}

type ActivityTag {
  id: ID!
  name: String!
}

type AssignmentFlags {
  id: ID!
  name: String!
}

input DailyRecurrenceInput {
  interval: Int!
}

type DateRange {
  start: String!
  end: String!
}

type Location implements Node {
  """The Globally Unique ID of this object"""
  id: ID!
  name: String!
  activities(start: String! = "1970-01-01", end: String! = "2100-01-01"): [Activity!]!
}

input MonthlyRecurrenceInput {
  interval: Int!
  dayInMonth: Int!
}

type Mutation {
  changeStaffAssignment(staffId: ID, timeslot: TimeSlotInput!, change: NewStaffAssignmentInput!): [String!]!
  editActivity(activity: ActivityInput!): Activity
  moveActivity(activityId: String!, fromRow: String!, toRow: String!, rowType: RowType!): Activity
}

input NewStaffAssignmentInput {
  timeslot: TimeSlotInput
  staff: ID
  tags: [String!]
  attendance: Int
}

"""An object with a Globally Unique ID"""
interface Node {
  """The Globally Unique ID of this object"""
  id: ID!
}

"""Information to aid in pagination."""
type PageInfo {
  """When paginating forwards, are there more items?"""
  hasNextPage: Boolean!

  """When paginating backwards, are there more items?"""
  hasPreviousPage: Boolean!

  """When paginating backwards, the cursor to continue."""
  startCursor: String

  """When paginating forwards, the cursor to continue."""
  endCursor: String
}

type Query {
  node(
    """The ID of the object."""
    id: ID!
  ): Node!
  hello(value: String): String!
  activities(
    startDate: String! = "1970-01-01"
    endDate: String! = "2199-12-31"
    locationId: ID
    staffId: ID

    """Returns the items in the list that come before the specified cursor."""
    before: String = null

    """Returns the items in the list that come after the specified cursor."""
    after: String = null

    """Returns the first n items from the list."""
    first: Int = null

    """Returns the items in the list that come after the specified cursor."""
    last: Int = null
  ): ActivityConnection!
  locations: [Location!]!
  staff: [Staff!]!
  daterange: DateRange!
  assignments(
    start: String!
    end: String!

    """Returns the items in the list that come before the specified cursor."""
    before: String = null

    """Returns the items in the list that come after the specified cursor."""
    after: String = null

    """Returns the first n items from the list."""
    first: Int = null

    """Returns the items in the list that come after the specified cursor."""
    last: Int = null
  ): StaffAssignmentConnection!
  activityTags: [ActivityTag!]!
}

input RecurrenceGroup @oneOf {
  allOf: [RecurrenceRule!]!
  anyOf: [RecurrenceRule!]!
  noneOf: [RecurrenceRule!]!
}

input RecurrenceRule @oneOf {
  group: RecurrenceGroup
  daily: DailyRecurrenceInput
  weekly: WeeklyRecurrenceInput
  monthly: MonthlyRecurrenceInput
  weekInMonth: WeekInMonthRecurrenceInput
}

input RequirementInput {
  requirementId: ID!
  attendance: Int!
  minimum: Int!
  maximum: Int!
}

enum RowType {
  staff
  location
}

type Staff implements Node {
  """The Globally Unique ID of this object"""
  id: ID!
  name: String!
  assignments(start: String! = "1970-01-01", end: String! = "2100-01-01"): [StaffAssignment!]!
}

type StaffAssignment implements Node {
  """The Globally Unique ID of this object"""
  id: ID!
  staff: Staff!
  timeslot: TimeSlot!
  flags: [AssignmentFlags!]!
}

"""A connection to a list of items."""
type StaffAssignmentConnection {
  """Pagination data for this connection"""
  pageInfo: PageInfo!

  """Contains the nodes in this connection"""
  edges: [StaffAssignmentEdge!]!
}

"""An edge in a connection."""
type StaffAssignmentEdge {
  """A cursor for use in pagination"""
  cursor: String!

  """The item at the end of the edge"""
  node: StaffAssignment!
}

type TimeSlot implements Node {
  """The Globally Unique ID of this object"""
  id: ID!
  start: String!
  finish: String!
  activity: Activity!
  assignments: [StaffAssignment!]!
}

input TimeSlotInput {
  activityId: String!
  startTime: String!
}

input WeekInMonthRecurrenceInput {
  interval: Int!
  weekday: Int!
  weekNo: Int!
}

input WeeklyRecurrenceInput {
  interval: Int!
  weekday: Int!
}